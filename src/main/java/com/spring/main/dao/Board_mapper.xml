<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd"
>

<mapper namespace="com.spring.main.dao.BoardDAO">
<!--글상세보기-->
<select id="Boarddetail" resultType="board">
	 SELECT BOARDIDX,SUBJECT,CONTENT,ID,REG_DATE,ROOMSIZE,BUDGET,KEYITEMS,BHIT,BLIND,BRDCTGIDX,FORMIDX,EMAIL FROM BOARD WHERE BOARDIDX=#{boardIdx}
	</select>
<!--게시판카테고리 -->
<select id="boardCtg" resultType="String">
		SELECT category FROM boardCtg WHERE boardCtgIdx=#{boardCtgIdx}
	</select>
<!--주거형태카테고리-->
<select id="formCtg" resultType="String">
		SELECT category FROM formCtg WHERE formCtgIdx=#{formCtgIdx}
	</select>
	<!-- 조회수 증가 -->
	<update id="boardUpHit">
		UPDATE board SET bHit=bHit+1 WHERE boardIdx=#{boardIdx}
	</update>
	<!--글작성하기-->
	<insert id="boardWrite" 
		useGeneratedKeys="true"
		keyProperty="boardIdx"
		keyColumn="boardIdx"
		parameterType="board">
		<if test="boardctg==1">
		INSERT INTO board(BOARDIDX, SUBJECT, CONTENT, ID,BRDCTGIDX) 
		VALUES
		(board_seq.NEXTVAL, #{subject}, #{content}, #{id},#{boardCtgIdx})
		</if>
		<if test="boardctg==2">
		INSERT INTO board(BOARDIDX, SUBJECT, CONTENT, ID,BRDCTGIDX,FORMIDX,ROOMSIZE,BUDGET,KEYITEMS) 
		VALUES
		(board_seq.NEXTVAL, #{subject}, #{content}, #{id},#{boardCtgIdx},#{formIdx},#{roomSize},#{budget},#{keyItems})
		</if>
		<if test="boardctg==3">
		INSERT INTO board(BOARDIDX, SUBJECT, CONTENT, ID,BRDCTGIDX) 
		VALUES
		(board_seq.NEXTVAL, #{subject}, #{content}, #{id},#{boardCtgIdx})
		</if>
		<if test="boardctg==4">
		INSERT INTO board(BOARDIDX, SUBJECT, CONTENT, ID,BRDCTGIDX) 
		VALUES
		(board_seq.NEXTVAL, #{subject}, #{content}, #{id},#{boardCtgIdx})
		</if>
		<if test="boardctg==5">
		INSERT INTO board(BOARDIDX, SUBJECT, CONTENT, ID,BRDCTGIDX) 
		VALUES
		(board_seq.NEXTVAL, #{subject}, #{content}, #{id},#{boardCtgIdx})
		</if>
		<if test="boardctg==6">
		INSERT INTO board(BOARDIDX, SUBJECT, CONTENT, ID,BRDCTGIDX) 
		VALUES
		(board_seq.NEXTVAL, #{subject}, #{content}, #{id},#{boardCtgIdx})
		</if>
	</insert>
	<!--글작성파일추가-->
	<insert id="boardWriteFile">
		INSERT INTO photos (PHOTOIDX, NEWFILENAME, ORIFILENAME, BOARDIDX) 
		VALUES (photos_seq.NEXTVAL, #{param1}, #{param2}, #{param3})
	</insert>
	
</mapper>